<!DOCTYPE html>
<html>
<head>
  <title>Mateka'te</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="css/leaflet/leaflet.css" />
  <link rel="stylesheet" href="css/leaflet/MarkerCluster.css" />
  <link rel="stylesheet" href="css/leaflet/MarkerCluster.ClubMate.css" />
  <link rel="stylesheet" href="css/leaflet/Control.OSMGeocoder.css" />
  <link rel="stylesheet" href="css/leaflet/L.Control.Locate.min.css" />
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="css/leaflet/Infobox.css" />

  <script src="js/leaflet/leaflet.js"></script>
  <script src="js/leaflet/leaflet.markercluster.js"></script>
  <script src="js/leaflet/leaflet-hash.js"></script>
  <script src="js/leaflet/Control.OSMGeocoder.js"></script>
  <script src="js/leaflet/L.Control.Locate.min.js"></script>
  <script src="js/leaflet/leaflet.infobox.js"></script>
  <style type="text/css">
    #map {
      position: absolute;
      height: 100%;
      width: 100%;
    }
    body {
      margin: 0;
    }
  </style>
  <script src="js/icons.js"></script>
  <script src="js/club-mate-data.js"></script>
  <script type="text/javascript">
  function clubmatemap() {
    // create a map in the "map" div, set the view to a given place and zoom
    var map = L.map('map').setView([51.159, 9.976], 6);
  
    // add an OpenStreetMap tile layer
    L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors, <a href="impressum.html">Impressum</a>'
    }).addTo(map);

    // Marker Clusters
    var markers = new L.MarkerClusterGroup({showCoverageOnHover: false, maxClusterRadius: 40});
    mate_locations_populate(markers);
    map.addLayer(markers);

    // Locate Button
    L.control.locate().addTo(map);

    // Infobox
    L.control.infobox().addTo(map);
    var closebar = document.getElementById("closebar");
    closebar.onclick = function() {
      document.getElementById("infobox").style.display = "none";
    };

    // Search Box
    var options = {
      collapsed: true, /* Whether its collapsed or not */
      position: 'topleft', /* The position of the control */
      text: 'Locate', /* The text of the submit button */
      bounds: null, /* a L.LatLngBounds object to limit the results to */
      email: null, /* an email string with a contact to provide to Nominatim. Useful if you are doing lots of queries */
      callback: function (results) {
        var bbox = results[0].boundingbox,
            first = new L.LatLng(bbox[0], bbox[2]),
            second = new L.LatLng(bbox[1], bbox[3]),
            bounds = new L.LatLngBounds([first, second]);
        this._map.fitBounds(bounds);
      }
    };
    var osmGeocoder = new L.Control.OSMGeocoder(options);
    map.addControl(osmGeocoder);

    // Scale
    scale = L.control.scale();
    scale.setPosition('bottomright');
    scale.addTo(map);

    // Hash URL
    var hash = new L.Hash(map);
  }
  </script>
</head>
<body onload="clubmatemap()">
  <div id="map"></div>
  <div id="infobox">
    <h1>Mateka'te</h1>
    <h2>Zweck</h2>
    <p>Diese Karte stellt alle auf <a href="http://www.openstreetmap.org">OpenStreetMap</a> eingetragen Orte, in denen man <a href="http://www.clubmate.de/">Club-Mate</a> käuflich erwerben kann, dar. </p>
    <h2>Legende</h2>
    <p>
      Die in der Karte verwendeten Symbole haben die folgende Bedeutung: <br />
      <img src="icons/club-mate_24x24_-12x-12.png" alt="" /> Es gibt hier Club-Mate.</br >
      <!--img src="icons/club-mate-retail_30x40_-12x-28.png" alt="" /> Es gibt hier Club-Mate für Wiederverkäufer.</br >
      <img src="icons/club-mate-served_32x40_-12x-28.png" alt="" /> Es gibt hier Club-Mate serviert (z.B. Restaurant, Bar, Club, …).</br -->
    </p>
    <h2>Fundort eintragen</h2>
    <p>Da <a href="http://www.openstreetmap.org">OpenStreetMap</a> ein Projekt ist, bei dem jeder mitmachen kann, ist es natürlich auch möglich, weitere Punkte, an denen Cub-Mate gekauft werden kann, hinzuzufügen. Weitere Verkaufsorte von Club-Mate können in Openstreetmap mit dem Tag <a href="http://wiki.openstreetmap.org/wiki/Key:drink:club-mate">drink:club-mate</a> versehen werden und erscheinen nach einiger Zeit hier in dieser Karte. Im Wiki der CCCMz Mateka'te existiert eine ausführliche Anleitung, <a href="https://github.com/cccmzwi/matekate/wiki/Neuen-Mate-Punkt-anlegen">wie man neuen Punkt anlegt und ihm Tags hinzufügt</a>.</p>
    <h2>Danksagungen</h2>
    <p>Diese Karte wurde inspiriert von
      <ul>
        <li>der <a href="https://cccmz.de/matekate">Matekarte des CCCMz</a>, die leider nicht mehr aktualisert wird,</li>
        <li>dem Projekt matekarte.de von Pascal, das aufgrund von persönlichen Gründen nicht mehr weiter geführt wird und</li>
        <li>dem Projekt <a href="http://veggiekarte.de">veggiekarte.de</a> von Benjamin, das besonders viele Anregungen zur Gestaltung von dieser Mateka'te beigetragen hat.</li>
      </ul>
    </p>
    <h2>Über</h2>
    <p>Der Quellcode dieser Karte findet sich auch auf <a href="https://github.com/Strubbl/matekate">Github</a>. Das letzte Update wird auch <a href="lastupdate.txt">geloggt</a>.</p>
    <div id="closebar">Schließen</div>
  </div>
</body>
</html>
